@page "/purchase"

@rendermode InteractiveServer
@* We cannoit specify Interactive Server as an attribute for AutoCompleteComponent like @rendermode="InteractiveServer"
because page is in Blazor SSR mode while Auto Complete in Interactive, so why this entire component made Interactive*@

@inject IViewInventoriesByNameUseCase ViewInventoriesByNameUseCase;

<h3>Purchase Inventory</h3>
<br/>

<AutoCompleteComponent Label="Inventory" SearchFunction="SearchInventory"></AutoCompleteComponent>

@code {
    private List<ItemViewModel>? SearchInventory(string name)
    {
        var list = ViewInventoriesByNameUseCase.ExecuteAsync(name).GetAwaiter().GetResult();

        if (list is null) return null;

        var itemList = list.Select(inv => new ItemViewModel { Id = inv.InventoryId, Name = inv.InventoryName }).ToList();

        return itemList;
    }
}
