<div class="form-group">
    <label for="search">@Label</label>
    <input type="text" class="form-control" @bind-value="userInput" @bind-value:event = "oninput" />
</div>
@if (searchResults is not null && searchResults.Count > 0)
{
    <div class="search-result">
        <ul>
            @foreach (var item in searchResults)
            {
                <li @key="@item.Id">
                    @item.Name
                </li>
            }
        </ul>
    </div>
}


@code {
    [Parameter]
    public string Label { get; set; } = "Search";

    [Parameter]
    public Func<string, List<ItemViewModel>>? SearchFunction { get; set; }
    // similar to Func<string, List<ItemViewModel>> is following
    // public delegate List<ItemViewModel> SearchFunction(string searchFilter);

    private string _userInput = string.Empty;
    private List<ItemViewModel>? searchResults = null;

    public string userInput {
        get => _userInput;
        set {
            _userInput = value;

            if (!string.IsNullOrEmpty(_userInput) && SearchFunction is not null)
            {
                searchResults = SearchFunction(_userInput);
            }
            
        }
    }
}
